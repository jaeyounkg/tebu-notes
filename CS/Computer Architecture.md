
# 構造ハザード
一つの回路を複数の命令が同時に使用しようとした。後続命令をストール

## いつ起こるか
- 設計が間違っている
- 同時に４命令を実行できるプロセッサのALUが２個

## 対応技術
- プロセッサの設計を適切にする
- IM と DM を分離する
- Reg の読み出し・書き込みタイミングを別にする
- などなど

# データハザード
命令の実行に必要なデータが用意できていない。用意されるまでストールさせないといけない

## 対応技術
- フォワーディング (HW)
  - 後続命令で必要なデータを早期供給
  - データをレジスタに保存する前に、そのデータを必要とするユニットに送る
- スケジューリング (SW)
  - 被演算子の値が依存関係にある命令を並び替える（間隔を広げる）

# 制御ハザード
beq などの命令で、分岐成否・分岐先が分からないので用意するまでストール
- 分岐予測（成立・不成立）
  - 予測成功 -> そのまま実行
  - 予測失敗 -> フラッシュ（無意味な命令を無効化）する
- 分岐判定・分岐先計算の前倒し
  - 早めに分岐の成否を知ることでフラッシュ対象を減らす
- 動的分岐予測
  - 分岐予測パッファ（BPB）
    - 1 or 2 bits で予測（飽和カウンタ）
  - 分岐先バッファ（BTB）

# 仮想記憶とキャッシュの関係

- ライト・バック時にアドレス変換が必要か（depends on tag == V）
- キャッシュタグに仮想空間IDが必要か（depends on tag == V）
- synonym が生じうるか（depends on index == V）
